<!-- Include jQuery (if not already included in your base.html) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

{% extends "base.html" %}
{% block content %}
<h2 class="mt-5">Your Cart: <b>items</b></h2>
<h3 class="mt-5">Restaurant: <b>Haldirams</b></h3>
{% for cart in carts %}
<div class="row d-flex justify-content-between cartt">
    <!-- Cart Items List -->
    <div class="col-12 col-lg-8">
        <div class="cart-item">
            <div class="row">
                <!-- Image of the item -->
                <div class="col-4 col-lg-3">
                    <img src="https://assets.onecompiler.app/42ejjj4uw/42s2jnwh5/images.jpeg" alt="items" height="90" width="115" />
                </div>
                <!-- Name of the item -->
                <div class="col-5 col-lg-3">{{ cart.name }}</div>
                <!-- Price of the item -->
                <div class="col-4 col-lg-2 mt-4 mt-lg-0">
                    <p id="card_item_price">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-currency-rupee" viewBox="0 0 16 16">
                            <path d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4z" />
                        </svg>
                        {{ cart.price }}
                    </p>
                </div>
                <!-- Quantity Controls -->
                <div class="col-4 col-lg-3 mt-4 mt-lg-0">
                    <div class="stockCounter d-inline">
                        <form action="{{url_for('customers.update_cart',item_id=cart.cart_id)}}" method="POST" class="d-inline">
                            <input type="hidden" name="action" value="decrease">
                            <button type="submit" class="btn btn-danger">-</button>
                        </form>
                
                        <!-- Display current quantity (could be rendered dynamically) -->
                        
                        <span class="quantity-display">{{ cart.quantity }}</span>
                
                        <!-- Plus button -->
                        <form action="{{url_for('customers.update_cart',item_id=cart.cart_id)}}" method="POST" class="d-inline">
                            <input type="hidden" name="action" value="increase">
                            <button type="submit" class="btn btn-primary">+</button>
                        </form>
                    </div>
                </div>
                <!-- Remove i<tem from cart -->
                    <form action="{{url_for('customers.delete_cart_item',item_id=cart.cart_id)}}" method="POST">
                        <button type="submit" class="btn">
                    <div class="col-4 col-lg-1 mt-4 mt-lg-0">
                        <i id="delete_cart_item" class="fa fa-trash btn btn-danger delete-item" data-id="{{ cart.id }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                                <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5" />
                            </svg>
                        </i>
                    </div>
                    </button>
                    </form>
            </div>
            <hr />
        </div>
    </div>
    {%endfor%}
    <!-- Order Summary Section -->
<!-- Order Summary Section -->
<div class="col-12 col-lg-3 my-4">
  <div id="order_summary">
      <h4>Order Summary</h4>
      <hr />
      <p>
          Subtotal:
          <span class="order-summary-values">
              {{ carts | length }} (Units)
          </span>
      </p>
      <p>
          Total:
          <span class="order-summary-values">
              <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-currency-rupee"
                  viewBox="0 0 16 16"
              >
                  <path
                      d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4z"
                  />
              </svg>
              {{ total_price }}
          </span>
      </p>
      <hr />
      <button id="checkout_btn" class="btn btn-primary btn-block">
          Check Out
      </button>
  </div>
</div>

{% endblock %}
